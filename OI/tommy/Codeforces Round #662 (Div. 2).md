### Codeforces Round #662 (Div. 2)

#### A

日常推结论题。

可以发现，每次最优策略一定是 $\texttt{Dash}$ 先填当前外面一圈，$\texttt{Fluttershy}$ 填外面剩下的部分再顺便填里面一圈。

平均下来一圈大概需要填一个回合。特殊的，对于 $n$ 为偶数的情况，需要多填一次。

总结得答案 $ans=\lfloor\frac{n}{2}\rfloor+1$。

#### B

签到题。

看上去似乎有很多种情况，我们可以尝试简化。

将四块长度相同的木板分为一组，组数记为 $cnt_1$。再将 **剩下** 的两块长度相同的木板分为一组，组数记为 $cnt_2$。

则能够拼出一个长方形和一个正方形，当且仅当 $cnt_1>1||(cnt_2>1\&\&cnt_4==1)$。

用桶动态维护一下即可，时间复杂度为 $O(n+q)$。

#### C

贪心题。

看上去是个二分题，我们先把题面简化一下。

题面：给 $n$ 个正整数，可以重新安排顺序，令相同数间的距离的**最小值最大**，**定义距离为两数间数的数量**。

通过手玩，我们发现答案只产生在出现次数最多的数中。

考虑如何安排这部分数，显然有 $ans=\frac{n-q\times w}{w-1}+q-1$，其中 $q$ 为出现 $w$ 次不同的数个数，$w$ 为出现最多的次数。

#### D

常规 $\texttt{DP}$ 题。

乍一看这个菱形似乎不大好生成，但我们很快就可以发现一个性质：统计以每个点为几何中心的大小不一的菱形个数之和，就是 $ans$。

再进一步观察，发现每个菱形事实上由四个重叠的 **全等的等腰三角形** 构成。这启发我们计算从一个点出发，计算能够形成的最大三角形。

最大三角形看上去似乎不好计算，但事实上通过最简单的生成就可以得到。

以左上的三角形为例，设 $leftup[i,j]$ 为 $(i,j)$ 为顶点的 **最大左上三角形的腰长**。

则有：
$$
leftup[i,j]=\min\{leftup[i-1,j],left[i,j-1]\}\times[a_{i,j}=a_{i-1,j}]\times[a_{i,j}=a_{i,j-1}]+1
$$
计算其他三角形的方法略有不同，但大体相同。

最后 $O(nm)$ 统计答案即可，时间复杂度为 $O(nm)$。